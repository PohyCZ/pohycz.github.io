var words=[],regex,loaded=!1,wordSize,defaultLang="cs",path="",defaultLetters={cs:"abcdefghijklmnopqrstuvwxyz\u011b\u0161\u010d\u0159\u017e\u00fd\u00e1\u00ed\u00e9\u00fa\u016f".split(""),en:"abcdefghijklmnopqrstuvwxyz".split("")},texts={cs:{wordSize:"D\u00e9lka slova",letters:"Dostupn\u00e1 p\u00edsmena",getWords:"Uka\u017e mi mo\u017en\u00e1 slova!",result:"Slova uvid\u00ed\u0161 tady",mail:"N\u011bco nefunguje?"},en:{wordSize:"Word size",letters:"Available letters",getWords:"Show me possible words!",
result:"Words will display here",mail:"Something is broken?"}};letters=[];
function loadDictionary(a){defaultLang=a;loaded&&($("#wordSize").val(""),generateLetters(),$("#letters").val(""),getWords(),console.log("wat"));switch(a){case "en":path="words/en.txt";letters=defaultLetters.en;setTexts(texts.en);$("#cs").attr("class","btn btn-default btn-lang");$("#en").attr("class","btn btn-primary btn-lang");break;case "cs":path="words/cs.txt",letters=defaultLetters.cs,setTexts(texts.cs),$("#en").attr("class","btn btn-default btn-lang"),$("#cs").attr("class","btn btn-primary btn-lang")}$.ajax({type:"get",
url:path,success:function(a){words=a.toLowerCase().split("\n");loaded=!0}})}function setTexts(a){$("#wordSize").attr("placeholder",a.wordSize);$("#letters").attr("placeholder",a.letters);$("#getWords").val(a.getWords);$("#result").html(a.result);$("#mail").html(a.mail)}
function generateLetters(){wordSize=$("#wordSize").val().valueOf();var a="";switch(defaultLang){case "en":a="letter";break;case "cs":a="p\u00edsmeno"}for(var b="",c=0;c<wordSize;c++)b+='<input type="text" id="'+c+'" class="form-control" placeholder="'+(c+1)+". "+a+'" oninput="getWords()">';debug("word size: "+wordSize);$(".letters").html(b)}function getWord(){for(var a=[],b=0;b<wordSize;b++){var c=$("#"+b).val().toLowerCase();""==c?a.push(" "):a.push(c)}debug("word: "+a);return a}
function debug(a){console.log("DEBUG: "+a)}
function getWords(){""!=$("#letters").val()&&(letters=$("#letters").val().toLowerCase().split(""));debug("letters: "+letters);word=getWord();var a="";word.forEach(function(b){a=" "==b?a+("["+letters+"]"):a+b});debug("regex: "+a);regex=RegExp(a,"g");var b;if(loaded){b=words.filter(function(a){return regex.exec(a)});b=b.filter(function(a){return a.length==wordSize});debug("matched words: "+b);var c="";b.forEach(function(a){c+=a+" "});$("#result").html(c)}}loadDictionary(defaultLang);